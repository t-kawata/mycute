# ==============================================
# 一般設定
# ==============================================
# CORS を RT モードで適用するか否か（1 = する, さもなくば = しない）
CORS_ON_AT_RT=1

# ==============================================
# LLM (Large Language Model) 設定
# ==============================================
# テキスト生成（Completion）に使用するLLMのベースURL
# OpenAI互換のAPIエンドポイントを指定します（例: https://api.openai.com/v1）
COMPLETION_BASE_URL=https://api.openai.com/v1

# テキスト生成に使用するAPIキー
# セキュリティのため、本番環境では適切に管理してください
COMPLETION_API_KEY=sk-proj-?????

# テキスト生成に使用するモデル名
# 例: gpt-4o, gpt-4-turbo, claude-3-opus など
COMPLETION_MODEL=gpt-4o-mini

# EmbeddingApiKey (DB保存時) 等の暗号化に使用する秘密鍵
CUBER_CRYPTO_SECRET_KEY=your_secret_key_at_least_32_bytes

# ==============================================
# データベース設定
# ==============================================
# データベースファイルを保存するディレクトリパス
# 永続化データの保存先となります
DB_DIR_PATH=/usr/local/mycute/db

# デバッグモードの有効化 (true/false)
# trueの場合、詳細なログが出力されます
CUBER_DEBUG=true

# ストレージ（DB接続）のアイドルタイムアウト（分）
# この期間使用されなかったCubeのDB接続は自動的にクローズされます (デフォルト: 60)
CUBER_STORAGE_IDLE_TIMEOUT_MINUTES=60

# ==============================================
# S3 / ストレージ設定
# ==============================================
# ローカルストレージを使用するかどうか (1 or not)
# 1: ローカルファイルシステムを使用 / それ以外: AWS S3を使用
CUBER_S3_USE_LOCAL=1

# s3client をローカルストレージモードで使用する時の保存先ルートディレクトリ
CUBER_S3_LOCAL_DIR=/usr/local/mycute/s3

# s3client で Down() した時にファイルが保存されるためのルートディレクトリ
CUBER_S3_DL_DIR=/usr/local/mycute/dl

# AWS アクセスキーID (S3使用時のみ必要)
AWS_ACCESS_KEY_ID=your_access_key

# AWS シークレットアクセスキー (S3使用時のみ必要)
AWS_SECRET_ACCESS_KEY=your_secret_key

# AWS リージョン (S3使用時のみ必要)
AWS_REGION=us-east-1

# S3 バケット名 (S3使用時のみ必要)
AWS_S3_BUCKET=your_bucket_name

# ローカルストレージの時、ディスク残量がこのGBを下回らないよう自動削除制御
MIN_FREE_DISK=15

# S3一時ファイルのクリーンアップ間隔（分）
# ダウンロードしたキャッシュファイルを削除する頻度 (デフォルト: 60分)
CUBER_S3_CLEANUP_INTERVAL_MINUTES=60

# S3一時ファイルの保持期間（時間）
# この時間を経過したファイルが削除対象となります (デフォルト: 24時間)
CUBER_S3_RETENTION_HOURS=24

# ==============================================
# Memify (知識グラフ強化) 設定
# ==============================================
# 一括処理（BULK）を行う最大文字数
# この文字数以下のドキュメントは一括で処理され、超える場合はバッチ処理されます
# デフォルト: 50000
CUBER_MEMIFY_MAX_CHARS=50000

# バッチ処理時のオーバーラップ率（%）
# 分割されたチャンク間の重複部分の割合 (デフォルト: 20%)
CUBER_MEMIFY_OVERLAP_PERCENT=20

# バッチ処理時の最小文字数
# これより小さい単位では分割されません (デフォルト: 5000)
CUBER_MEMIFY_BATCH_MIN_CHARS=5000

# ==============================================
# Metacognition (メタ認知) 設定
# ==============================================
# Unknown（未解決の問い）解決時の類似度閾値 (0.0〜1.0)
# この値より距離が近い（類似度が高い）場合、解決済みとみなします
# デフォルト: 0.3
CUBER_META_SIMILARITY_THRESHOLD_UNKNOWN=0.3

# Self-Reflection（自問自答）時の関連情報検索の類似度閾値 (0.0〜1.0)
# この値より距離が近いチャンクやルールを回答の根拠として使用します
# デフォルト: 0.5
CUBER_META_SIMILARITY_THRESHOLD_REFLECTION=0.5

# 知識の結晶化（Crystallization）時のクラスタリング類似度閾値 (0.0〜1.0)
# この値以上の類似度を持つルール同士をグループ化して統合します
# デフォルト: 0.8
CUBER_META_SIMILARITY_THRESHOLD_CRYSTALLIZATION=0.8

# Unknown解決時の最大検索数
# 解決策を探すために検索する類似Unknownの数 (デフォルト: 5)
CUBER_META_SEARCH_LIMIT_UNKNOWN=5

# Self-Reflection時のチャンク最大検索数
# 回答生成のために検索するドキュメントチャンクの数 (デフォルト: 3)
CUBER_META_SEARCH_LIMIT_REFLECTION_CHUNK=3

# Self-Reflection時のルール最大検索数
# 回答生成のために検索するルールの数 (デフォルト: 3)
CUBER_META_SEARCH_LIMIT_REFLECTION_RULE=3

# 知識結晶化時の最小クラスタサイズ
# 統合するために必要な最小のルール数 (デフォルト: 2)
CUBER_META_CRYSTALLIZATION_MIN_CLUSTER=2
# Graph Metabolism Configuration
# CUBER_GRAPH_METABOLISM_ALPHA=0.2       # 強化学習率 (0.0-1.0): エッジが支持された時の信頼度上昇幅
# CUBER_GRAPH_METABOLISM_DELTA=0.3       # 減衰ペナルティ率 (0.0-1.0): エッジが矛盾した時の信頼度減少率
# CUBER_GRAPH_METABOLISM_PRUNE_THRESHOLD=0.1 # 淘汰閾値: 生存スコア(Weight*Confidence)がこれを下回ると削除
# CUBER_GRAPH_PRUNING_GRACE_PERIOD_MINUTES=60 # 孤立ノード削除の猶予期間(分): 作成からこの期間内は削除されない
